(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{104:function(t,e,a){},105:function(t,e,a){},106:function(t,e,a){},107:function(t,e,a){},109:function(t,e,a){"use strict";a.r(e);var s=a(3),n=a.n(s),c=a(10),r=a.n(c),o=(a(50),a(15)),i=a.n(o),u=a(36),l=a(44),d=a(20),k=a(9),j=a(29),b=(a(52),a(53),a(4));function f(t){var e=new Intl.DateTimeFormat(navigator.language,{weekday:"long",day:"numeric",month:"short"}).format(new Date(t.date));return Object(b.jsx)("h1",{className:"current-date",children:e})}var m=a(37),p=a.n(m);a(55),a(56);function h(t){var e=Object(s.useState)(!1),a=Object(k.a)(e,2),n=a[0],c=a[1],o=function(){c(!n)};return Object(b.jsxs)(s.Fragment,{children:[Object(b.jsx)("button",{className:"datepicker-toggle",onClick:o}),n&&r.a.createPortal(Object(b.jsxs)(s.Fragment,{children:[Object(b.jsx)("div",{className:"datepicker-container",children:Object(b.jsx)(p.a,{inline:!0,selected:new Date(t.date),onChange:function(e){t.onSelectDate(e),o()},onClickOutside:o})}),Object(b.jsx)("div",{className:"overlay"})]}),document.querySelector(".datepicker-root"))]})}a(104);function O(t){return Object(b.jsx)("p",{className:"task-count",children:"".concat(t.tasksCount," ").concat(1===t.tasksCount?"task":"tasks")})}function D(t){var e=function(){var e=Object(d.a)(i.a.mark((function e(a){var s,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new Date(a).toDateString(),e.next=3,t.taskStorage.getTasks(s);case 3:n=e.sent,t.onSelectDate(s,n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)(f,{date:t.date}),Object(b.jsx)(O,{tasksCount:t.tasksCount}),0!==t.tasksCount&&Object(b.jsx)("button",{type:"button",className:"toggle-deletion",onClick:function(){return t.onEdit()}}),Object(b.jsx)(h,{date:t.date,onSelectDate:e})]})}a(105);function v(t){var e=Object(s.useState)(""),a=Object(k.a)(e,2),n=a[0],c=a[1];return Object(b.jsxs)("form",{className:"task-form",onSubmit:function(e){if(e.preventDefault(),""!==n.trim()){var a={date:t.date,value:n.trim(),isDone:!1};t.onFormSubmit(a),c("")}},children:[Object(b.jsx)("input",{value:n,className:"task-form__input",onChange:function(t){c(t.target.value)}}),Object(b.jsx)("button",{className:"task-form__submit",type:"submit",children:"+"})]})}var x=a(40);function g(t){var e=Object(x.useState)(t.isDone),a=Object(k.a)(e,2),s=a[0],n=a[1];return Object(b.jsxs)("li",{className:"task-wrapper__item",children:[Object(b.jsx)("input",{type:"checkbox",checked:s,id:"task-item-".concat(t.id),className:"task-wrapper__check",onChange:function(){n(!s),t.onTaskUpdate(t.id,{isDone:!s})}}),Object(b.jsx)("label",{htmlFor:"task-item-".concat(t.id),className:"task-wrapper__value",children:t.value}),Object(b.jsx)("button",{className:"task-wrapper__delete"})]})}a(106);function w(t){var e="task-wrapper"+(t.isEditing?" task-wrapper_editing":"");return Object(b.jsx)("ul",{className:e,onClick:function(e){if(e.target.matches(".task-wrapper__delete")){var a=e.target.closest(".task-wrapper__item").querySelector(".task-wrapper__check"),s=Number(a.id.slice(10));t.onItemDelete(s)}},children:t.tasks.map((function(e){return Object(b.jsx)(g,{id:e.id,value:e.value,isDone:e.isDone,isEditing:t.isEditing,onTaskUpdate:t.onItemUpdate},e.id)}))})}function _(t){var e=Object(s.useState)(!1),a=Object(k.a)(e,2),n=a[0],c=a[1],r=t.storage,o=Object(s.useState)({selectedDate:(new Date).toDateString(),selectedDateTasks:t.tasks,tasksCount:t.tasks.length}),f=Object(k.a)(o,2),m=f[0],p=f[1],h=function(){var t=Object(d.a)(i.a.mark((function t(e){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.storeTask(e);case 2:a=t.sent,p((function(t){return{selectedDate:t.selectedDate,selectedDateTasks:[].concat(Object(l.a)(t.selectedDateTasks),[Object(u.a)(Object(u.a)({},e),{},{id:a})]),tasksCount:t.tasksCount+1}}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)(j.Fragment,{children:[Object(b.jsx)(D,{taskStorage:r,tasks:m.selectedDateTasks,tasksCount:m.tasksCount,date:m.selectedDate,onSelectDate:function(t,e){p({selectedDate:t,selectedDateTasks:e,tasksCount:e.length})},onEdit:function(){c(!n)}}),Object(b.jsx)(v,{onFormSubmit:h,date:m.selectedDate}),Object(b.jsx)(w,{isEditing:n,tasks:m.selectedDateTasks,onItemUpdate:r.updateTask.bind(r),onItemDelete:function(t){r.deleteTask(t),p((function(e){return{selectedDate:e.selectedDate,selectedDateTasks:m.selectedDateTasks.filter((function(e){return e.id!==t})),tasksCount:e.tasksCount-1}})),m.tasksCount-1===0&&c(!1)}})]})}var S=a(41),C=a(42),T=a(43),y=function(){function t(){Object(S.a)(this,t),this._tasksDb=new T.a("TasksDb"),this._tasksDb.version(1).stores({tasks:"++id, date, value, isDone"})}return Object(C.a)(t,[{key:"storeTask",value:function(t){return this._tasksDb.tasks.put(t)}},{key:"updateTask",value:function(t,e){this._tasksDb.tasks.update(t,e)}},{key:"getTasks",value:function(t){return this._tasksDb.tasks.where({date:t}).toArray()}},{key:"deleteTask",value:function(t){this._tasksDb.tasks.delete(t)}}]),t}();a(107);function N(){return Object(b.jsxs)(s.Fragment,{children:["Icons made by"," ",Object(b.jsx)("a",{className:"footer__link",href:"https://www.flaticon.com/authors/DinosoftLabs",title:"DinosoftLabs",target:"_blank",rel:"noreferrer",children:"DinosoftLabs"})," ","from"," ",Object(b.jsx)("a",{className:"footer__link",href:"https://www.flaticon.com/",title:"Flaticon",target:"_blank",rel:"noreferrer",children:"flaticon.com"})]})}var F=new y;F.getTasks((new Date).toDateString()).then((function(t){r.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(_,{storage:F,tasks:t})}),document.querySelector(".app"))})),r.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(N,{})}),document.querySelector(".footer"))},50:function(t,e,a){},52:function(t,e,a){},53:function(t,e,a){},56:function(t,e,a){}},[[109,1,2]]]);
//# sourceMappingURL=main.660d7efe.chunk.js.map