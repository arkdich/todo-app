(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{112:function(t,e,n){},113:function(t,e,n){},114:function(t,e,n){},115:function(t,e,n){},116:function(t,e,n){},118:function(t,e,n){"use strict";n.r(e);var a=n(2),s=n.n(a),c=n(7),r=n.n(c),i=(n(56),n(57),n(6)),o=(n(63),n(4));function u(){var t=Object(i.c)((function(t){return t.tasks.date})),e=new Intl.DateTimeFormat(navigator.language,{weekday:"long",day:"numeric",month:"short"}).format(new Date(t));return Object(o.jsx)("h1",{className:"current-date",children:e})}var d=n(8),b=n.n(d),j=n(16),l=n(15),f=n(45),p=n.n(f),O=(n(66),n(67),n(49)),k=n(5),m=n(42),h=n(43),v=n(44),g=new(function(){function t(){Object(m.a)(this,t),this._tasksDb=new v.a("TasksDb"),this._tasksDb.version(1).stores({tasks:"++id, date, value, isDone"})}return Object(h.a)(t,[{key:"storeTask",value:function(t){return this._tasksDb.tasks.put(t)}},{key:"updateTask",value:function(t,e){this._tasksDb.tasks.update(t,e)}},{key:"getTasks",value:function(t){return this._tasksDb.tasks.where({date:t}).toArray()}},{key:"deleteTask",value:function(t){this._tasksDb.tasks.delete(t)}}]),t}()),x={isLoaded:!1,isEditing:!1,date:(new Date).toDateString(),items:[]},y=function(t){return{type:"tasks/setIsLoaded",payload:t}},w=function(t){return{type:"tasks/setIsEditing",payload:t}},D=function(t){return{type:"tasks/setItems",payload:t}},_=function(t){return{type:"tasks/addItem",payload:t}},N=function(t){return{type:"tasks/updateItem",payload:t}},I=function(t){return{type:"tasks/deleteItem",payload:t}};function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;return"tasks/setIsLoaded"===n?Object(k.a)(Object(k.a)({},t),{},{isLoaded:a}):"tasks/setIsEditing"===n?a?Object(k.a)(Object(k.a)({},t),{},{isEditing:a}):Object(k.a)(Object(k.a)({},t),{},{isEditing:!t.isEditing}):"tasks/setItems"===n?Object(k.a)(Object(k.a)({},t),{},{isEditing:!1,isLoaded:!0,date:a.date,items:a.tasks}):"tasks/addItem"===n?Object(k.a)(Object(k.a)({},t),{},{items:[].concat(Object(O.a)(t.items),[a])}):"tasks/updateItem"===n?Object(k.a)(Object(k.a)({},t),{},{items:t.items.map((function(t){return t.id===a.id?Object(k.a)(Object(k.a)({},t),{},{isDone:a.isDone}):Object(k.a)({},t)}))}):"tasks/deleteItem"===n?Object(k.a)(Object(k.a)({},t),{},{items:t.items.filter((function(t){return t.id!==a}))}):t}var S=function(t){return function(){var e=Object(j.a)(b.a.mark((function e(n,a){var s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t||a().tasks.date,n(y(!1)),e.next=4,g.getTasks(s);case 4:return c=e.sent,n(D({date:s,tasks:c})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},T=function(t){return function(){var e=Object(j.a)(b.a.mark((function e(n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.storeTask(t);case 2:a=e.sent,n(_(Object(k.a)({id:a},t)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(t){return function(){var e=Object(j.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.updateTask(t.id,{isDone:t.isDone});case 2:n(N({id:t.id,isDone:t.isDone}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(t){return function(){var e=Object(j.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.deleteTask(t);case 2:n(I(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function F(){var t=Object(a.useState)(!1),e=Object(l.a)(t,2),n=e[0],s=e[1],c=Object(i.c)((function(t){return t.tasks.date})),u=Object(i.b)(),d=function(){s((function(t){return!t}))},f=function(){var t=Object(j.a)(b.a.mark((function t(e){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d(),n=new Date(e).toDateString(),u(S(n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)("button",{className:"datepicker-toggle",onClick:d}),n&&r.a.createPortal(Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)("div",{className:"datepicker-container",children:Object(o.jsx)(p.a,{inline:!0,selected:new Date(c),onChange:f,onClickOutside:d})}),Object(o.jsx)("div",{className:"overlay"})]}),document.querySelector(".datepicker-root"))]})}n(112);function q(t){return Object(o.jsx)("p",{className:"task-count",children:"".concat(t.count," ").concat(1===t.count?"task":"tasks")})}function R(){var t=Object(i.c)((function(t){return t.tasks.items.length})),e=0===t,n="toggle-deletion ".concat(e?"toggle-deletion_disabled":""),a=Object(i.b)();return Object(o.jsxs)("div",{className:"header",children:[Object(o.jsx)(u,{}),Object(o.jsx)(q,{count:t}),Object(o.jsx)("button",{type:"button",className:n,disabled:e,onClick:function(){a(w())}}),Object(o.jsx)(F,{})]})}n(113);function A(){var t=Object(a.useState)(""),e=Object(l.a)(t,2),n=e[0],s=e[1],c=Object(i.c)((function(t){return t.tasks.date})),r=Object(i.b)();return Object(o.jsxs)("form",{className:"task-form",onSubmit:function(t){t.preventDefault(),""!==n.trim()&&(r(T({date:c,value:n.trim(),isDone:!1})),s(""))},children:[Object(o.jsx)("input",{value:n,className:"task-form__input",onChange:function(t){s(t.target.value)}}),Object(o.jsx)("button",{className:"task-form__submit",type:"submit",children:"+"})]})}var J=n(127);function P(t){var e=Object(a.useState)(t.isDone),n=Object(l.a)(e,2),s=n[0],c=n[1],r=Object(a.useState)(!0),u=Object(l.a)(r,2),d=u[0],b=u[1],j=Object(a.useRef)(),f=Object(i.b)(),p=function(){c((function(t){return!t})),f(L({id:t.id,isDone:!s}))},O=function(){b(!1)};return Object(o.jsx)(J.a,{nodeRef:j,in:d,timeout:300,onExited:function(){return f(C(t.id))},children:function(){var e=d?"":" task-wrapper__item_deleting";return Object(o.jsxs)("li",{ref:j,className:"task-wrapper__item"+e,children:[Object(o.jsx)("input",{type:"checkbox",checked:s,id:"task-item-".concat(t.id),className:"task-wrapper__check",onChange:p}),Object(o.jsx)("label",{htmlFor:"task-item-".concat(t.id),className:"task-wrapper__value",children:t.value}),Object(o.jsx)("button",{className:"task-wrapper__delete",onClick:O})]})}})}n(114);function B(){var t=Object(i.c)((function(t){return t.tasks.items})),e=Object(i.c)((function(t){return t.tasks.isLoaded})),n=Object(i.c)((function(t){return t.tasks.isEditing})),s="task-wrapper ".concat(n?"task-wrapper_editing":""),c=Object(a.useRef)();return Object(a.useEffect)((function(){var t=c.current;if(t){var e=Array.from(t.childNodes).reduce((function(t,e){return t+e.scrollHeight}),0),n=getComputedStyle(t);t.style.height=e+Number.parseInt(n.paddingTop)+Number.parseInt(n.paddingBottom)+"px"}})),Object(o.jsxs)("ul",{ref:c,className:s,children:[!e&&Object(o.jsx)("div",{className:"loading-gif"}),t.map((function(t){return Object(o.jsx)(P,{id:t.id,value:t.value,isDone:t.isDone,isEditing:n},t.id)}))]})}n(115);function H(){return Object(o.jsxs)(a.Fragment,{children:["Icons made by"," ",Object(o.jsx)("a",{className:"footer__link",href:"https://www.flaticon.com/authors/DinosoftLabs",title:"DinosoftLabs",target:"_blank",rel:"noreferrer",children:"DinosoftLabs"})," ","from"," ",Object(o.jsx)("a",{className:"footer__link",href:"https://www.flaticon.com/",title:"Flaticon",target:"_blank",rel:"noreferrer",children:"flaticon.com"})]})}n(116);function M(){var t=Object(i.b)();return Object(a.useEffect)((function(){t(S())}),[t]),Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)(R,{}),Object(o.jsx)(A,{}),Object(o.jsx)(B,{}),r.a.createPortal(Object(o.jsx)(H,{}),document.querySelector(".footer"))]})}var z=n(40),G=n(48);var K=Object(z.a)(G.a),Q=Object(z.b)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return{tasks:E(t.tasks,e)}}),K);r.a.render(Object(o.jsx)(i.a,{store:Q,children:Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(M,{})})}),document.querySelector(".app"))},56:function(t,e,n){},57:function(t,e,n){},63:function(t,e,n){},67:function(t,e,n){}},[[118,1,2]]]);
//# sourceMappingURL=main.7c3d58e4.chunk.js.map