(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{103:function(t,e,a){},104:function(t,e,a){},105:function(t,e,a){},106:function(t,e,a){},108:function(t,e,a){"use strict";a.r(e);var s=a(3),n=a.n(s),c=a(10),r=a.n(c),o=(a(49),a(15)),i=a.n(o),u=a(35),l=a(42),d=a(20),k=a(9),j=(a(51),a(52),a(4));function b(t){var e=new Intl.DateTimeFormat(navigator.language,{weekday:"long",day:"numeric",month:"short"}).format(new Date(t.date));return Object(j.jsx)("h1",{className:"current-date",children:e})}var f=a(36),m=a.n(f);a(54),a(55);function p(t){var e=Object(s.useState)(!1),a=Object(k.a)(e,2),n=a[0],c=a[1],o=function(){c(!n)};return Object(j.jsxs)(s.Fragment,{children:[Object(j.jsx)("button",{className:"datepicker-toggle",onClick:o}),n&&r.a.createPortal(Object(j.jsxs)(s.Fragment,{children:[Object(j.jsx)("div",{className:"datepicker-container",children:Object(j.jsx)(m.a,{inline:!0,selected:new Date(t.date),onChange:function(e){t.onSelectDate(e),o()},onClickOutside:o})}),Object(j.jsx)("div",{className:"overlay"})]}),document.querySelector(".datepicker-root"))]})}a(103);function h(t){return Object(j.jsx)("p",{className:"task-count",children:"".concat(t.tasksCount," ").concat(1===t.tasksCount?"task":"tasks")})}function O(t){var e=function(){var e=Object(d.a)(i.a.mark((function e(a){var s,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new Date(a).toDateString(),e.next=3,t.taskStorage.getTasks(s);case 3:n=e.sent,t.onSelectDate(s,n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"header",children:[Object(j.jsx)(b,{date:t.date}),Object(j.jsx)(h,{tasksCount:t.tasksCount}),0!==t.tasksCount&&Object(j.jsx)("button",{type:"button",className:"toggle-deletion",onClick:function(){return t.onEdit()}}),Object(j.jsx)(p,{date:t.date,onSelectDate:e})]})}a(104);function D(t){var e=Object(s.useState)(""),a=Object(k.a)(e,2),n=a[0],c=a[1];return Object(j.jsxs)("form",{className:"task-form",onSubmit:function(e){if(e.preventDefault(),""!==n.trim()){var a={date:t.date,value:n.trim(),isDone:!1};t.onFormSubmit(a),c("")}},children:[Object(j.jsx)("input",{value:n,className:"task-form__input",onChange:function(t){c(t.target.value)}}),Object(j.jsx)("button",{className:"task-form__submit",type:"submit",children:"+"})]})}function v(t){var e=Object(s.useState)(t.isDone),a=Object(k.a)(e,2),n=a[0],c=a[1];return Object(j.jsxs)("li",{className:"task-wrapper__item",children:[Object(j.jsx)("input",{type:"checkbox",checked:n,id:"task-item-".concat(t.id),className:"task-wrapper__check",onChange:function(){c(!n),t.onTaskUpdate(t.id,{isDone:!n})}}),Object(j.jsx)("label",{htmlFor:"task-item-".concat(t.id),className:"task-wrapper__value",children:t.value}),Object(j.jsx)("button",{className:"task-wrapper__delete"})]})}a(105);function x(t){var e="task-wrapper"+(t.isEditing?" task-wrapper_editing":"");return Object(j.jsx)("ul",{className:e,onClick:function(e){if(e.target.matches(".task-wrapper__delete")){var a=e.target.closest(".task-wrapper__item").querySelector(".task-wrapper__check"),s=Number(a.id.slice(10));t.onItemDelete(s)}},children:t.tasks.map((function(e){return Object(j.jsx)(v,{id:e.id,value:e.value,isDone:e.isDone,isEditing:t.isEditing,onTaskUpdate:t.onItemUpdate},e.id)}))})}function g(t){var e=Object(s.useState)(!1),a=Object(k.a)(e,2),n=a[0],c=a[1],r=t.storage,o=Object(s.useState)({selectedDate:(new Date).toDateString(),selectedDateTasks:t.tasks,tasksCount:t.tasks.length}),b=Object(k.a)(o,2),f=b[0],m=b[1],p=function(){var t=Object(d.a)(i.a.mark((function t(e){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.storeTask(e);case 2:a=t.sent,m((function(t){return{selectedDate:t.selectedDate,selectedDateTasks:[].concat(Object(l.a)(t.selectedDateTasks),[Object(u.a)(Object(u.a)({},e),{},{id:a})]),tasksCount:t.tasksCount+1}}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsxs)(s.Fragment,{children:[Object(j.jsx)(O,{taskStorage:r,tasks:f.selectedDateTasks,tasksCount:f.tasksCount,date:f.selectedDate,onSelectDate:function(t,e){m({selectedDate:t,selectedDateTasks:e,tasksCount:e.length})},onEdit:function(){c(!n)}}),Object(j.jsx)(D,{onFormSubmit:p,date:f.selectedDate}),Object(j.jsx)(x,{isEditing:n,tasks:f.selectedDateTasks,onItemUpdate:r.updateTask.bind(r),onItemDelete:function(t){r.deleteTask(t),m((function(e){return{selectedDate:e.selectedDate,selectedDateTasks:f.selectedDateTasks.filter((function(e){return e.id!==t})),tasksCount:e.tasksCount-1}})),f.tasksCount-1===0&&c(!1)}})]})}var w=a(39),_=a(40),S=a(41),C=function(){function t(){Object(w.a)(this,t),this._tasksDb=new S.a("TasksDb"),this._tasksDb.version(1).stores({tasks:"++id, date, value, isDone"})}return Object(_.a)(t,[{key:"storeTask",value:function(t){return this._tasksDb.tasks.put(t)}},{key:"updateTask",value:function(t,e){this._tasksDb.tasks.update(t,e)}},{key:"getTasks",value:function(t){return this._tasksDb.tasks.where({date:t}).toArray()}},{key:"deleteTask",value:function(t){this._tasksDb.tasks.delete(t)}}]),t}();a(106);function T(){return Object(j.jsxs)(s.Fragment,{children:["Icons made by"," ",Object(j.jsx)("a",{className:"footer__link",href:"https://www.flaticon.com/authors/DinosoftLabs",title:"DinosoftLabs",target:"_blank",rel:"noreferrer",children:"DinosoftLabs"})," ","from"," ",Object(j.jsx)("a",{className:"footer__link",href:"https://www.flaticon.com/",title:"Flaticon",target:"_blank",rel:"noreferrer",children:"flaticon.com"})]})}var y=new C;y.getTasks((new Date).toDateString()).then((function(t){r.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(g,{storage:y,tasks:t})}),document.querySelector(".app"))})),r.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(T,{})}),document.querySelector(".footer"))},49:function(t,e,a){},51:function(t,e,a){},52:function(t,e,a){},55:function(t,e,a){}},[[108,1,2]]]);
//# sourceMappingURL=main.55a564c3.chunk.js.map